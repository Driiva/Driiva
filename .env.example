# =============================================================================
# Driiva Environment Variables
# =============================================================================
# Copy this file to .env and fill in real values. Never commit .env to git.
#
# Full list of where to get each value: see docs/ENV_AND_CREDENTIALS.md
#
# SECRET vs PUBLIC:
#   - PUBLIC (safe in client): Firebase web config is bundled in the browser.
#     Security = API key restrictions in Google Cloud (HTTP referrers + API
#     restrictions). Restrict the key to driiva.com and localhost (see
#     docs/FIREBASE_API_KEY_RESTRICTIONS.md).
#   - SECRET (server/CI only): Service account keys, DB URLs, API secrets.
#     Never expose in client or commit to git.
# =============================================================================

# -----------------------------------------------------------------------------
# Database (SECRET - server only)
# -----------------------------------------------------------------------------
# Neon PostgreSQL required. SQLite is not supported.
# Get a connection string at https://neon.tech and run migrations/schema.sql first.
DATABASE_URL="postgresql://user:password@your-project.neon.tech/driiva?sslmode=require"

# -----------------------------------------------------------------------------
# Firebase – Web / client config (PUBLIC in bundle, restrict key in GCP)
# -----------------------------------------------------------------------------
# Get these from Firebase Console → Project settings (gear) → General → Your apps → Web app.
# Restrict the API key in Google Cloud (HTTP referrers: driiva.com, localhost).
# See docs/FIREBASE_API_KEY_RESTRICTIONS.md.
# Also: Build → Firestore Database → "Create database" if you haven't yet.

VITE_FIREBASE_API_KEY="AIza..."
VITE_FIREBASE_PROJECT_ID="driiva"
VITE_FIREBASE_APP_ID="1:894211619782:web:..."

# Optional – client uses defaults if omitted
VITE_FIREBASE_AUTH_DOMAIN="driiva.firebaseapp.com"
VITE_FIREBASE_STORAGE_BUCKET="driiva.firebasestorage.app"
# Project settings → Cloud Messaging → Sender ID (e.g. 894211619782)
VITE_FIREBASE_MESSAGING_SENDER_ID="894211619782"
VITE_FIREBASE_MEASUREMENT_ID="G-XXXXXXXXXX"

# -----------------------------------------------------------------------------
# Sentry Error Monitoring
# -----------------------------------------------------------------------------
# Get your DSN at: https://sentry.io → Project Settings → Client Keys (DSN)
# Leave blank to disable error monitoring (errors still logged to console)
VITE_SENTRY_DSN=""

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
# Toggle optional features. Set to "true" to enable, "false" to disable.
VITE_FEATURE_AI_INSIGHTS="true"

# -----------------------------------------------------------------------------
# Root Platform Insurance API (Cloud Functions only)
# -----------------------------------------------------------------------------
# These are consumed by Cloud Functions, not the client.
# Set in Cloud Functions env via: firebase functions:secrets:set ROOT_API_KEY
# ROOT_API_KEY="sandbox_..."
# ROOT_API_URL="https://sandbox.rootplatform.com/v1"
# ROOT_ENVIRONMENT="sandbox"

# -----------------------------------------------------------------------------
# Firebase Admin (server only – JWT verification for all protected /api/* routes)
# -----------------------------------------------------------------------------
# Required for auth middleware. Without it, protected routes cannot verify tokens.
# Option A: Path to service account JSON file
# GOOGLE_APPLICATION_CREDENTIALS="/path/to/serviceAccountKey.json"
# Option B: Inline JSON (e.g. in production env)
# FIREBASE_SERVICE_ACCOUNT_KEY='{"type":"service_account",...}'
# Optional: project ID (service account JSON also contains it; set if you need it in code)
# FIREBASE_PROJECT_ID="driiva"

# -----------------------------------------------------------------------------
# Optional – server only
# -----------------------------------------------------------------------------
# Perplexity AI (only if you use /api/ask)
# PERPLEXITY_API_KEY="pplx-..."
# Trip telematics encryption at rest (any secret string; default used if unset)
# ENCRYPTION_KEY="your-secret-key"

# -----------------------------------------------------------------------------
# API security (server only)
# -----------------------------------------------------------------------------
# Comma-separated origins allowed for CORS. No wildcard in production.
# Example: https://app.driiva.com,https://driiva.com,http://localhost:5173
CORS_ORIGINS="http://localhost:5173,http://localhost:3000,http://127.0.0.1:5173,http://127.0.0.1:3000"

# Admin Firebase UIDs allowed to call admin-only routes (e.g. PUT /api/community-pool).
# Comma-separated. Leave empty if no admin routes are used.
# ADMIN_FIREBASE_UIDS="uid1,uid2"

# -----------------------------------------------------------------------------
# Cloud Functions (no keys in repo)
# -----------------------------------------------------------------------------
# Cloud Functions use Firebase Admin SDK with Application Default Credentials.
# Set DATABASE_URL for syncUserOnSignup and syncTripOnComplete:
#   firebase functions:config:set db.url="postgresql://user:pass@host/db?sslmode=require"
# Or use Secret Manager and DATABASE_URL in function config.
