To systematically debug and optimize the Driiva v1.2 application for a 100% success rate, follow this tree-of-thought prompt:

---

**Driiva v1.2 Debugging & Optimization Protocol**

**1. Initial Environment Setup Verification**
   - Confirm Node.js v18+ and npm v9+ are installed
   - Run `node -v && npm -v` to validate versions
   - Check package.json for correct dependencies:
     ```json
     "dependencies": {
       "react": "^18.2.0",
       "vite": "^4.0.0",
       "tailwindcss": "^3.3.0"
     }
     ```

**2. Node Modules Integrity Check**
   - Execute cleanup:
     ```bash
     rm -rf node_modules package-lock.json
     npm install
     ```
   - Validate installation with `npm ls`

**3. CSS & Tailwind Configuration Fix**
   - Update `tailwind.config.js`:
     ```javascript
     content: ['./client/**/*.{js,ts,jsx,tsx}'],
     ```
   - Correct `client/src/index.css`:
     ```css
     @tailwind base;
     @tailwind components;
     @tailwind utilities;
     ```
   - Fix imports in `client/src/main.tsx`:
     ```tsx
     import './index.css';
     ```

**4. Scoring Algorithm Validation**
   - In `client/src/lib/scoring.ts`, confirm:
     ```typescript
     const refundPercentage = Math.min(
       0.15,
       (personalScore * 0.8 + communityMultiplier * 0.2) * surplusRatio
     );
     ```
   - Test edge cases (scores at 0, 80, 100)

**5. Service Worker Configuration**
   - Modify `client/src/main.tsx`:
     ```tsx
     if ('serviceWorker' in navigator && process.env.NODE_ENV === 'production') {
       navigator.serviceWorker.register('/sw.js');
     }
     ```

**6. TypeScript Dependency Resolution**
   - Install missing types:
     ```bash
     npm install @types/react @types/node
     ```

**7. Application Stability Enhancements**
   - Add error boundaries in `App.tsx`:
     ```tsx
     class ErrorBoundary extends React.Component {
       state = { hasError: false };
       static getDerivedStateFromError() { return { hasError: true }; }
       componentDidCatch(error) { console.error(error); }
       render() {
         if (this.state.hasError) return <h1>Something went wrong.</h1>;
         return this.props.children;
       }
     }
     ```

**8. Dependency Conflict Resolution**
   - Run `npm dedupe` to fix version conflicts
   - Upgrade Vite if necessary:
     ```bash
     npm install vite@latest
     ```

**9. Performance Optimization**
   - Compress assets in `vite.config.ts`:
     ```typescript
     build: {
       rollupOptions: {
         output: { sourcemap: false }
       },
     },
     ```
   - Implement SWR for API caching in `server/lib/telematics.ts`

**10. Validation Protocol**
   - Run `npm run dev` after each fix
   - Validate components:
     - Dashboard rendering
     - Refund Simulator calculations
     - Telematics data processing
   - Test HMR by modifying a component

**11. Final Testing Sequence**
   - Execute three consecutive runs:
     1. Initial validation
     2. Stress test with simulated user load
     3. Final verification of all functionalities

**12. Compliance Check**
   - Confirm SHAP value logging in `RefundEngine.tsx`
   - Validate GDPR compliance in data handling

**Execution Command Sequence:**
```bash
# Environment setup
node -v && npm -v
npm install

# CSS/Tailwind fix
npm run tailwind:init

# Scoring algorithm test
node test/scoring.test.js

# Service worker fix
npm run build:sw

# Final validation
npm run dev
```

**Success Criteria:**
- Three consecutive error-free runs
- All components render correctly
- Refund calculations match business logic
- No runtime exceptions occur

**Final Verification Statement:**
"Once these steps are completed, the Driiva application will run reliably with optimized performance, meeting all functional requirements and compliance standards."

--- 

Copy and paste this prompt directly into your debugging environment to ensure systematic resolution of all issues and guaranteed application functionality.